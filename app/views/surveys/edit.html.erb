<div class="edit-outer-container">
  <% survey_questions = @survey.questions %>
  <% survey_questions.any? do |q| %>
    <% if !q.answers.empty? == false %>
      <!-- this renders the survey form -->
    <div class="edit-survey-header">
      <h1><%= @survey.name %></h1>
      </div>

      <div class="edit-form-div">
        <%= render 'form' %>
      </div>

      <div class="edit-questions-div">
      <h2>Edit Questions for your Survey</h2>
      <%= form_for(@survey) do |f| %>
        <%= f.fields_for(:questions) do |ff| %>
          <div class="field">
            <%= ff.label :query %><br>
            <%= ff.text_field :query %>
          </div>
          <div class="field">
            <%= ff.label :description %><br>
            <%= ff.text_field :description %>
          </div>
          <div class="field">
            <%= ff.label :required, 'Make required?' %><br>
            <%= ff.check_box :required %>
          </div>
          <div class="field">
            <%= ff.label :query_type %><br>
            <%= ff.text_field :query_type %>
          </div>
          <div class="field">
            <%= ff.label :position %><br>
            <%= ff.text_field :position %>
          </div>
        <% end %>
        <div class="actions">
          <%= f.submit :Submit %>
        </div>
      <% end %>
    </div>
    <% else %>
      <h1><%= @survey.name %></h1>
          <h3>Survey Keyword</h3>
          <p><%= @survey.keyword %></p><br>
          <h3>Survey User ID</h3>
          <p><%= @survey.user_id %></p><br>
          <h3>Survey Description</h3>
          <p><%= @survey.description %></p><br>
          <h3>Is Survey Published?</h3>
          <%= @survey.published %><br>
          <% if @survey.published == true %>
            <h3>URL to Survey</h3>
            <%= @survey.url %>
          <% end %>
      <% survey_questions.order(:position).each do |quest| %>
        <br><h3>Question<%= quest.position %></h3>
          <p><%= quest.query %><p><br>
          <h3>Is The Question Required?</h3>
          <p><%= quest.required %></p><br>
          <h3>Question Description</h3>
          <p><%= quest.description %></p><br>
          <h3>Answer(s)</h3>
          <% quest.answers.each do |a| %>
            <%= a.response %><br>
            <br>
          <% end %>
        <% end %>
    <% end %>
  <% end %>
  <%= link_to 'Back', surveys_path %><br>
</div>
